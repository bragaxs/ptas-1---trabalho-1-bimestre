datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum BookingStatus {
  Confirmed
  Cancelled
  Pending
}

enum UserRole {
  Admin
  Standard
}

model Room {
  id        String    @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  capacity  Int
  location  String?
  features  String[]
  isActive  Boolean
  bookings  Booking[] @relation("RoomBookings")
}

model User {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  email        String    @unique
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  role         UserRole
  registration String    @unique
  isActive     Boolean
  bookings     Booking[] @relation("UserBookings")
}

model Booking {
  id          String        @id @default(auto()) @map("_id") @db.ObjectId
  date        String
  roomId      String        @db.ObjectId
  userId      String        @db.ObjectId
  startTime   String
  endTime     String
  title       String
  description String?
  status      BookingStatus

  room        Room          @relation("RoomBookings", fields: [roomId], references: [id])
  user        User          @relation("UserBookings", fields: [userId], references: [id])
}
